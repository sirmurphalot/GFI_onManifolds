function dens = logspline_density(x_value,knots,coef_matrix,thetas)
    spline_indices = 1:length(knots);
    knot_interval_number = spline_indices(1,...
        find((x_value > knots)==1,1,'last'));
    [n,bspline_dim] = size(coef_matrix);
    num_of_bsplines = n/bsplin_dim;
    total_num_of_knots = length(knots);
    indices = 1:num_of_bsplines;
    
    which_work = ((indices + bspline_dim)>=knot_interval_number)&...
        ((indices + bspline_dim)<=total_num_of_knots);
    fun = @(i) ( *thetas(i))
    dens = exp(sum(flip(arrayfun(@(i)(x^i),powers)).*...
        coef_matrix(spline_number,:))*...
        thetas(spline_number));
end